

# 🏗️ 원단 스와치 마스터 데이터 관리 시스템 개발 명세서

## 1. 프로젝트 개요

* **목적:** 수기로 작성하던 원단 발주 의뢰서를 웹 기반으로 디지털화하여 DB에 저장하고, 데이터를 기반으로 표준 원단 코드를 자동 생성한다.
* **핵심 타겟:** 현장에서 PC로 원단 정보를 입력하는 실무자.
* **주요 목표:**
1. 펜으로 쓰던 경험을 PC인터페이스로 최적화 (입력 편의성).
2. 원단 주요 정보의 정형 데이터화 (DB 저장).
3. 원단 표준 코드 자동 발급 시스템 구축.



## 2. 기술 스택 (Tech Stack)

* **Framework:** Next.js 14+ (App Router)
* **Language:** TypeScript
* **Styling:** Tailwind CSS
* **UI Components:** shadcn/ui (Radix UI 기반) - *생산성을 위해 필수*
* **Form Management:** React Hook Form + Zod (유효성 검사)
* **Database:** Supabase (PostgreSQL) or Local PostgreSQL
* **Icon:** Lucide React

## 3. 데이터베이스 스키마 설계 (Database Schema)

### 3.1. MASTER (원단 마스터)

*테이블명: `fabric_master*`

| 필드명 | 타입 | 설명 | 제약조건 |
| --- | --- | --- | --- |
| `id` | UUID | Primary Key | Default: uuid_generate_v4() |
| `brand` | TEXT | 브랜드 (ROEM, SPAO 등) | Not Null |
| `season_year` | INT | 시즌 연도 (2025) | Not Null |
| `season_term` | TEXT | 시즌 (SS, FW, ALL) | Not Null |
| `art_no` | TEXT | 품명 (사용자 입력) | Unique |
| `std_code` | TEXT | 표준 코드 (자동 생성) | Nullable (생성 후 저장) |
| `width` | TEXT | 규격 폭 (56") |  |
| `weight` | TEXT | 규격 중량 (126gsm) |  |
| `vendor_name` | TEXT | 거래처명 |  |
| `order_date` | DATE | 발주일 | Default: Now |
| `created_at` | TIMESTAMPTZ | 생성일시 |  |

### 3.2. MIXING RATIO (혼용률 구성)

*테이블명: `fabric_mixing_ratio*`

| 필드명 | 타입 | 설명 | 제약조건 |
| --- | --- | --- | --- |
| `id` | UUID | Primary Key | Default: uuid_generate_v4() |
| `fabric_id` | UUID | Foreign Key | References `fabric_master.id` (Cascade) |
| `fiber_type` | TEXT | 소재명 (Cotton, Poly 등) | Not Null |
| `percentage` | INT | 혼용률 (%) | Not Null (1~100) |

### 3.3. FABRIC DETAIL (색상별 상세)

*테이블명: `fabric_detail*`

| 필드명 | 타입 | 설명 | 제약조건 |
| --- | --- | --- | --- |
| `id` | UUID | Primary Key |  |
| `fabric_id` | UUID | Foreign Key | References `fabric_master.id` |
| `color_name` | TEXT | 색상명 (L/Beige 등) | Not Null |
| `swatch_img_url` | TEXT | 스와치 이미지 URL |  |
| `memo` | TEXT | 비고 |  |

## 4. 화면 UI/UX 상세 요구사항

### 4.1. 공통 레이아웃

* pc 퍼스트 반응형 디자인.
* 상단 Header: 타이틀 및 '저장' 버튼 (Sticky Position).

### 4.2. 기본 정보 입력 폼 (Header Section)

* **Brand:** `Radio Group` 또는 `Badge` 형태. 탭 한 번으로 선택.
* **Season:** 연도와 시즌을 묶어서 `Select` (Dropdown) 처리.
* **Art No:** 텍스트 입력 + 우측에 '중복확인' 버튼 배치.
* **Composition (Dynamic Fiber Composer):**
    *   **입력 방식:** 기본 1행 제공, `+ 소재 추가` 버튼으로 행 추가 가능 (동적 리스트).
    *   **Fields:** `Combobox` (소재명 검색/선택) + `Number Input` (비율 %).
    *   **Validation:** 하단에 실시간 Total % 표시. 합계가 정확히 100%일 때만 유효성 통과 (미달/초과 시 경고 메시지).
    *   **Shortcuts:** 자주 쓰는 단일 소재(예: Cotton 100%)는 `Chip` 클릭 한 번으로 자동 완성.
* **Vendor:** `Combobox` (검색 가능한 드롭다운) 적용.

### 4.3. 상세 리스트 (Grid Section)

* 테이블 형태보다는 모바일 친화적인 **Card List** 형태 권장.
* **스와치 이미지:**
* 영역 클릭 시 파일 업로더 트리거.
* 이미지 업로드 전에는 '카메라 아이콘' Placeholder 표시.
* 업로드 시 썸네일 미리보기 제공.


* **Row Action:** 각 행 우측에 `삭제(Trash)` 아이콘 배치.
* **Add Row:** 리스트 최하단에 `+ 색상 추가` 대형 버튼 배치.

## 6. 개발 가이드 (Prompt for AI)

> AI에게 작업을 지시할 때 아래 순서대로 진행해달라고 요청하세요.

1. **Project Setup:** Next.js, Tailwind, Shadcn UI 설치 및 기본 설정.
2. **DB Setup:** Supabase 클라이언트 설정 및 위 스키마에 따른 Table 생성 SQL 작성.
3. **Component Build:**
* `FabricForm`: 전체 폼을 감싸는 컴포넌트.
* `HeaderSection`: 브랜드, 시즌, 품명 등 상단 입력부.
* `SwatchList`: 색상별 카드를 렌더링하고 추가/삭제하는 리스트.
* `ImageUploader`: 이미지 선택 및 미리보기 컴포넌트.


4. **Logic Integration:** React Hook Form을 사용해 폼 상태 관리 및 Supabase 연동.
